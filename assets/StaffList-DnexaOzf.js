import{u as fe,m as J,r as ge,j as e,C as ee,P as Z}from"./index-DMjyWb87.js";import{a as m}from"./vendor-39lPmIfa.js";import{a as ve,u as ye}from"./redux-B4nc4lEw.js";import{c as v,a as L,b as T}from"./index.esm-Li650mXS.js";import{a as ne,d as I,e as P,c as M,b as _e,f as de}from"./useLocale-D5KkehiU.js";import{b as be,c as ie,n as he,o as Se,p as Ce,q as Ne,r as we,s as me,t as Fe,v as se,w as ae,x as ke,y as Re,z as Te,A as te,C as O,a as Ee,h as Ae,B as De,D as Le,E as Ie,F as $,G as Pe,H as Oe,I as Me}from"./DefaultLayout-D0SvWDL6.js";import{b as C,c as d,a as z}from"./CRow-D_VJqXdr.js";import{C as oe}from"./CCardHeader-B4dk8NaO.js";import{c as xe,a as qe}from"./cil-save-CuPF9_Mc.js";import{C as K}from"./CInputGroup-DyS8gjpD.js";import{C as re}from"./CInputGroupText-CLTmAy_-.js";import{C as le,a as Q,b as X,c as F,d as p,e as Y,f as u}from"./CTable-8066dvqR.js";import{c as Be}from"./cil-options-sHCm5Gxk.js";var He=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M19.409,431.289v41.468a24.124,24.124,0,0,0,24.1,24.1H76.877A149.445,149.445,0,0,0,183.25,452.792L383.966,252.075l55.846,56.069,22.671-22.582-55.889-56.114,1.287-1.288-.021-.02,63.287-63.287a84.853,84.853,0,0,0,0-120l-4-4a84.852,84.852,0,0,0-120,0l-64.326,64.326L230.947,53.1,208.275,75.68,260.387,128,63.471,324.916A149.449,149.449,0,0,0,19.409,431.289ZM369.774,63.48a52.854,52.854,0,0,1,74.747,0l4,4a52.913,52.913,0,0,1,0,74.745L387.147,203.6,308.4,124.853Zm-85.72,86.107,78.573,78.573-69.176,69.176v-.483H136.788ZM104.788,328.853H261.935L160.623,430.165a117.662,117.662,0,0,1-83.746,34.688H51.409V431.289A117.664,117.664,0,0,1,86.1,347.543Z' class='ci-primary'/>"],je=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M449.366,89.648l-.685-.428L362.088,46.559,268.625,171.176l43,57.337a88.529,88.529,0,0,1-83.115,83.114l-57.336-43L46.558,362.088l42.306,85.869.356.725.429.684a25.085,25.085,0,0,0,21.393,11.857h22.344A327.836,327.836,0,0,0,461.222,133.386V111.041A25.084,25.084,0,0,0,449.366,89.648Zm-20.144,43.738c0,163.125-132.712,295.837-295.836,295.837h-18.08L87,371.76l84.18-63.135,46.867,35.149h5.333a120.535,120.535,0,0,0,120.4-120.4v-5.333l-35.149-46.866L371.759,87l57.463,28.311Z' class='ci-primary'/>"];const ue=({staff:i=null,onClose:b,onSuccess:n})=>{const{business:r}=fe(),{t}=ne(),[x,N]=m.useState(!1),[q,j]=m.useState(""),[E,B]=m.useState([]),[A,w]=m.useState(!0),[c,g]=m.useState({first_name:"",last_name:"",email:"",phone:"",role:ge.junior_employee,commission_rate:10,is_available_for_booking:!0,working_hours:J,service_ids:[]}),[y,D]=m.useState(J);m.useEffect(()=>{U()},[r==null?void 0:r.id]),m.useEffect(()=>{if(i){const a=i.employee_services?i.employee_services.map(o=>o.service_id):[];g({first_name:i.first_name||"",last_name:i.last_name||"",email:i.email||"",phone:i.phone||"",role:i.role||"junior_employee",commission_rate:i.commission_rate||10,is_available_for_booking:i.is_available_for_booking!==!1,working_hours:i.working_hours||J,service_ids:a}),D(i.working_hours||J)}},[i]);const U=async()=>{if(r!=null&&r.id){w(!0);try{const{data:a,error:o}=await be(r.id);o?console.error("Error loading services:",o):B(a||[])}catch(a){console.error("Error loading services:",a)}finally{w(!1)}}},S=(a,o)=>{g(s=>({...s,[a]:o}))},V=a=>{g(o=>{const s=o.service_ids.includes(a)?o.service_ids.filter(h=>h!==a):[...o.service_ids,a];return{...o,service_ids:s}})},k=(a,o,s)=>{const h={...y,[a]:{...y[a],[o]:s}};D(h),g(_=>({..._,working_hours:h}))},R=()=>c.first_name.trim()?c.last_name.trim()?c.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)?c.commission_rate<0||c.commission_rate>100?(j(t("staff.errors.commissionRateInvalid")),!1):!0:(j(t("staff.errors.validEmailRequired")),!1):(j(t("staff.errors.emailRequired")),!1):(j(t("staff.errors.lastNameRequired")),!1):(j(t("staff.errors.firstNameRequired")),!1),H=async a=>{if(a.preventDefault(),j(""),!!R()){N(!0);try{const o={...c,business_id:r.id,working_hours:y};let s;i?s=await he(i.id,o):s=await Se(o),s.error?j(s.error):n(s.data)}catch(o){j(o.message||t("staff.errors.genericError"))}finally{N(!1)}}},l={monday:t("staff.days.monday"),tuesday:t("staff.days.tuesday"),wednesday:t("staff.days.wednesday"),thursday:t("staff.days.thursday"),friday:t("staff.days.friday"),saturday:t("staff.days.saturday"),sunday:t("staff.days.sunday")},f=[{value:"manager",label:t("staff.roles.manager")},{value:"reception",label:t("staff.roles.reception")},{value:"senior_employee",label:t("staff.roles.seniorEmployee")},{value:"junior_employee",label:t("staff.roles.juniorEmployee")}];return e.jsx(C,{children:e.jsx(d,{xs:12,children:e.jsxs(I,{className:"mb-4",children:[e.jsx(oe,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h4",{className:"mb-0",children:t(i?"staff.form.editStaff":"staff.form.addNewStaff")}),e.jsxs(z,{color:"light",onClick:b,disabled:x,children:[e.jsx(v,{icon:xe,className:"me-2"}),t("staff.form.back")]})]})}),e.jsxs(P,{children:[q&&e.jsx(M,{color:"danger",dismissible:!0,onClose:()=>j(""),children:q}),e.jsxs(_e,{onSubmit:H,children:[e.jsxs(C,{children:[e.jsx(d,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsxs(L,{htmlFor:"first_name",children:[t("staff.form.firstName")," *"]}),e.jsxs(K,{children:[e.jsx(re,{children:e.jsx(v,{icon:de})}),e.jsx(T,{type:"text",id:"first_name",placeholder:t("staff.form.firstNamePlaceholder"),value:c.first_name,onChange:a=>S("first_name",a.target.value),required:!0,disabled:x})]})]})}),e.jsx(d,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsxs(L,{htmlFor:"last_name",children:[t("staff.form.lastName")," *"]}),e.jsxs(K,{children:[e.jsx(re,{children:e.jsx(v,{icon:de})}),e.jsx(T,{type:"text",id:"last_name",placeholder:t("staff.form.lastNamePlaceholder"),value:c.last_name,onChange:a=>S("last_name",a.target.value),required:!0,disabled:x})]})]})})]}),e.jsxs(C,{children:[e.jsx(d,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsxs(L,{htmlFor:"email",children:[t("staff.form.email")," *"]}),e.jsx(T,{type:"email",id:"email",placeholder:t("staff.form.emailPlaceholder"),value:c.email,onChange:a=>S("email",a.target.value),required:!0,disabled:x||i}),i&&e.jsx("small",{className:"text-muted",children:t("staff.form.emailCannotChange")})]})}),e.jsx(d,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(L,{htmlFor:"phone",children:t("staff.form.phone")}),e.jsxs(K,{children:[e.jsx(re,{children:e.jsx(v,{icon:je})}),e.jsx(T,{type:"tel",id:"phone",placeholder:t("staff.form.phonePlaceholder"),value:c.phone,onChange:a=>S("phone",a.target.value),disabled:x})]})]})})]}),e.jsxs(C,{children:[e.jsx(d,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsxs(L,{htmlFor:"role",children:[t("staff.form.role")," *"]}),e.jsx(ie,{id:"role",value:c.role,onChange:a=>S("role",a.target.value),required:!0,disabled:x,children:f.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})}),e.jsx(d,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(L,{htmlFor:"commission_rate",children:t("staff.form.commissionRate")}),e.jsx(T,{type:"number",id:"commission_rate",min:"0",max:"100",step:"0.1",value:c.commission_rate,onChange:a=>S("commission_rate",parseFloat(a.target.value)||0),disabled:x})]})})]}),e.jsx(C,{className:"mb-4",children:e.jsx(d,{xs:12,children:e.jsx(le,{id:"is_available_for_booking",checked:c.is_available_for_booking,onChange:a=>S("is_available_for_booking",a.target.checked),label:t("staff.form.availableForBooking"),disabled:x})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{children:t("staff.form.assignedServices")}),A?e.jsx("div",{className:"text-center py-4",children:e.jsx(ee,{})}):E.length===0?e.jsx(M,{color:"info",children:t("staff.form.noServicesAvailable")}):e.jsx("div",{className:"border rounded p-3",children:E.map(a=>e.jsx(le,{id:`service-${a.id}`,checked:c.service_ids.includes(a.id),onChange:()=>V(a.id),label:`${a.name} - ${a.duration_minutes} min - ${a.price} PLN`,disabled:x,className:"mb-2"},a.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{children:t("staff.form.workingHours")}),Object.entries(l).map(([a,o])=>{var s,h,_,G,ce;return e.jsxs(C,{className:"mb-2 align-items-center",children:[e.jsx(d,{md:2,children:e.jsx(L,{className:"mb-0",children:o})}),e.jsx(d,{md:2,children:e.jsx(le,{checked:((s=y[a])==null?void 0:s.available)!==!1,onChange:W=>k(a,"available",W.target.checked),label:t("staff.form.available"),disabled:x})}),e.jsx(d,{md:3,children:e.jsx(T,{type:"time",value:((h=y[a])==null?void 0:h.start)||"09:00",onChange:W=>k(a,"start",W.target.value),disabled:x||!((_=y[a])!=null&&_.available)})}),e.jsx(d,{md:3,children:e.jsx(T,{type:"time",value:((G=y[a])==null?void 0:G.end)||"17:00",onChange:W=>k(a,"end",W.target.value),disabled:x||!((ce=y[a])!=null&&ce.available)})})]},a)})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx(z,{type:"button",color:"secondary",onClick:b,disabled:x,children:t("staff.form.cancel")}),e.jsx(z,{type:"submit",color:"primary",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx(ee,{size:"sm",className:"me-2"}),t(i?"staff.form.updating":"staff.form.creating")]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{icon:qe,className:"me-2"}),t(i?"staff.form.updateStaff":"staff.form.createStaff")]})})]})]})]})]})})})};ue.propTypes={staff:Z.object,onClose:Z.func.isRequired,onSuccess:Z.func.isRequired};const pe=({staffId:i,onBack:b,onEdit:n})=>{const{t:r}=ne(),[t,x]=m.useState(null),[N,q]=m.useState([]),[j,E]=m.useState(null),[B,A]=m.useState(!0),[w,c]=m.useState(""),[g,y]=m.useState("details");m.useEffect(()=>{i&&D()},[i]),m.useEffect(()=>{g==="schedule"&&t?U():g==="performance"&&t&&S()},[g,t]);const D=async()=>{A(!0),c("");try{const{data:l,error:f}=await Ce(i);f?c(f):x(l)}catch(l){c(l.message)}finally{A(!1)}},U=async()=>{const l=new Date,f=l.toISOString().split("T")[0],a=new Date(l.getTime()+336*60*60*1e3).toISOString().split("T")[0];try{const{data:o,error:s}=await Ne(i,f,a);s?c(s):q(o||[])}catch(o){c(o.message)}},S=async()=>{const l=new Date,f=new Date(l.getTime()-720*60*60*1e3).toISOString().split("T")[0],a=l.toISOString().split("T")[0];try{const{data:o,error:s}=await we(i,f,a);s?c(s):E(o)}catch(o){c(o.message)}},V=l=>{const a={active:{color:"success",text:r("staff.status.active")},invited:{color:"warning",text:r("staff.status.invited")},inactive:{color:"secondary",text:r("staff.status.inactive")},terminated:{color:"danger",text:r("staff.status.terminated")}}[l]||{color:"secondary",text:l};return e.jsx(O,{color:a.color,children:a.text})},k=l=>{const a={owner:{color:"primary",text:r("staff.roles.owner")},manager:{color:"info",text:r("staff.roles.manager")},reception:{color:"success",text:r("staff.roles.reception")},senior_employee:{color:"warning",text:r("staff.roles.seniorEmployee")},junior_employee:{color:"secondary",text:r("staff.roles.juniorEmployee")}}[l]||{color:"secondary",text:l};return e.jsx(O,{color:a.color,children:a.text})},R=l=>new Date(`2000-01-01T${l}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),H=l=>new Date(l).toLocaleDateString();return B?e.jsx("div",{className:"text-center p-4",children:e.jsx(ee,{})}):w?e.jsx(M,{color:"danger",children:w}):t?e.jsx(C,{children:e.jsx(d,{xs:12,children:e.jsxs(I,{className:"mb-4",children:[e.jsx(oe,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h4",{className:"mb-0",children:r("staff.details.title")}),e.jsxs("div",{children:[e.jsxs(z,{color:"primary",size:"sm",className:"me-2",onClick:()=>n(t),children:[e.jsx(v,{icon:me,className:"me-2"}),r("staff.actions.edit")]}),e.jsxs(z,{color:"secondary",variant:"ghost",onClick:b,children:[e.jsx(v,{icon:xe,className:"me-2"}),r("staff.form.back")]})]})]})}),e.jsxs(P,{children:[e.jsxs(Fe,{variant:"tabs",className:"mb-3",children:[e.jsx(se,{children:e.jsx(ae,{active:g==="details",onClick:()=>y("details"),style:{cursor:"pointer"},children:r("staff.details.tabs.details")})}),e.jsx(se,{children:e.jsxs(ae,{active:g==="schedule",onClick:()=>y("schedule"),style:{cursor:"pointer"},children:[e.jsx(v,{icon:ke,className:"me-2"}),r("staff.details.tabs.schedule")]})}),e.jsx(se,{children:e.jsxs(ae,{active:g==="performance",onClick:()=>y("performance"),style:{cursor:"pointer"},children:[e.jsx(v,{icon:Re,className:"me-2"}),r("staff.details.tabs.performance")]})})]}),e.jsxs(Te,{children:[e.jsx(te,{visible:g==="details",children:e.jsxs(C,{children:[e.jsxs(d,{md:6,children:[e.jsx("h5",{children:r("staff.details.personalInfo")}),e.jsx("table",{className:"table table-borderless",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("strong",{children:[r("staff.details.name"),":"]})}),e.jsxs("td",{children:[t.first_name," ",t.last_name]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("strong",{children:[r("staff.details.email"),":"]})}),e.jsx("td",{children:t.email})]}),t.phone&&e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("strong",{children:[r("staff.details.phone"),":"]})}),e.jsxs("td",{children:[e.jsx(v,{icon:je,className:"me-2"}),t.phone]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("strong",{children:[r("staff.details.role"),":"]})}),e.jsx("td",{children:k(t.role)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("strong",{children:[r("staff.details.status"),":"]})}),e.jsx("td",{children:V(t.status)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("strong",{children:[r("staff.details.commissionRate"),":"]})}),e.jsxs("td",{children:[t.commission_rate,"%"]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("strong",{children:[r("staff.details.availableForBooking"),":"]})}),e.jsx("td",{children:e.jsx(O,{color:t.is_available_for_booking?"success":"secondary",children:t.is_available_for_booking?r("staff.details.yes"):r("staff.details.no")})})]}),t.joined_at&&e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("strong",{children:[r("staff.details.joined"),":"]})}),e.jsx("td",{children:H(t.joined_at)})]})]})})]}),e.jsxs(d,{md:6,children:[e.jsx("h5",{children:r("staff.details.workingHours")}),e.jsxs(Q,{small:!0,children:[e.jsx(X,{children:e.jsxs(F,{children:[e.jsx(p,{children:r("staff.details.day")}),e.jsx(p,{children:r("staff.details.hours")})]})}),e.jsx(Y,{children:t.working_hours&&Object.entries(t.working_hours).map(([l,f])=>e.jsxs(F,{children:[e.jsx(u,{className:"text-capitalize",children:l}),e.jsx(u,{children:f.available===!1?e.jsx(O,{color:"secondary",children:r("staff.details.closed")}):`${R(f.start)} - ${R(f.end)}`})]},l))})]}),t.employee_services&&t.employee_services.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{className:"mt-4",children:r("staff.details.assignedServices")}),e.jsxs(Q,{small:!0,children:[e.jsx(X,{children:e.jsxs(F,{children:[e.jsx(p,{children:r("staff.details.service")}),e.jsx(p,{children:r("staff.details.price")}),e.jsx(p,{children:r("staff.details.duration")})]})}),e.jsx(Y,{children:t.employee_services.map(l=>{var f,a,o;return e.jsxs(F,{children:[e.jsx(u,{children:(f=l.services)==null?void 0:f.name}),e.jsxs(u,{children:["PLN ",(a=l.services)==null?void 0:a.price]}),e.jsxs(u,{children:[(o=l.services)==null?void 0:o.duration_minutes," min"]})]},l.id)})})]})]})]})]})}),e.jsxs(te,{visible:g==="schedule",children:[e.jsx("h5",{children:r("staff.details.schedule.title")}),N.length===0?e.jsx(M,{color:"info",children:r("staff.details.schedule.noAppointments")}):e.jsxs(Q,{hover:!0,children:[e.jsx(X,{children:e.jsxs(F,{children:[e.jsx(p,{children:r("staff.details.schedule.date")}),e.jsx(p,{children:r("staff.details.schedule.time")}),e.jsx(p,{children:r("staff.details.schedule.client")}),e.jsx(p,{children:r("staff.details.schedule.service")}),e.jsx(p,{children:r("staff.details.schedule.duration")}),e.jsx(p,{children:r("staff.details.schedule.status")})]})}),e.jsx(Y,{children:N.map(l=>{var f,a,o;return e.jsxs(F,{children:[e.jsx(u,{children:H(l.appointment_date)}),e.jsx(u,{children:R(l.start_time)}),e.jsxs(u,{children:[(f=l.clients)==null?void 0:f.first_name," ",(a=l.clients)==null?void 0:a.last_name]}),e.jsx(u,{children:(o=l.services)==null?void 0:o.name}),e.jsxs(u,{children:[l.duration_minutes," min"]}),e.jsx(u,{children:e.jsx(O,{color:l.status==="completed"?"success":"primary",children:l.status})})]},l.id)})})]})]}),e.jsxs(te,{visible:g==="performance",children:[e.jsx("h5",{children:r("staff.details.performance.title")}),j?e.jsxs(C,{children:[e.jsx(d,{md:3,children:e.jsx(I,{className:"text-center",children:e.jsxs(P,{children:[e.jsx("h4",{className:"text-primary",children:j.totalAppointments}),e.jsx("p",{className:"text-muted mb-0",children:r("staff.details.performance.totalAppointments")})]})})}),e.jsx(d,{md:3,children:e.jsx(I,{className:"text-center",children:e.jsxs(P,{children:[e.jsx("h4",{className:"text-success",children:j.completedAppointments}),e.jsx("p",{className:"text-muted mb-0",children:r("staff.details.performance.completed")})]})})}),e.jsx(d,{md:3,children:e.jsx(I,{className:"text-center",children:e.jsxs(P,{children:[e.jsxs("h4",{className:"text-info",children:[j.completionRate.toFixed(1),"%"]}),e.jsx("p",{className:"text-muted mb-0",children:r("staff.details.performance.completionRate")})]})})}),e.jsx(d,{md:3,children:e.jsx(I,{className:"text-center",children:e.jsxs(P,{children:[e.jsxs("h4",{className:"text-warning",children:["PLN ",j.totalRevenue.toFixed(2)]}),e.jsx("p",{className:"text-muted mb-0",children:r("staff.details.performance.totalRevenue")})]})})})]}):e.jsx(M,{color:"info",children:r("staff.details.performance.loading")})]})]})]})]})})}):e.jsx(M,{color:"warning",children:r("staff.errors.staffNotFound")})};pe.propTypes={staffId:Z.string.isRequired,onBack:Z.func.isRequired,onEdit:Z.func.isRequired};const ss=()=>{const i=ve(),{business:b}=fe(),{t:n}=ne(),{staff:r,loading:t,error:x,filters:N}=ye(s=>s.staff),[q,j]=m.useState(!1),[E,B]=m.useState(null),[A,w]=m.useState(null),[c,g]=m.useState("");m.useEffect(()=>{b!=null&&b.id&&y()},[b==null?void 0:b.id,N]);const y=async()=>{console.log("[todo loadStaff()]"),i({type:"STAFF_LOADING"});try{const{data:s,error:h}=await Ee(b.id,N);console.log("[todo loadStaff()] getStaff ",{data:s,error:h}),h?(console.log("[todo loadStaff] STAFF_ERROR"),i({type:"STAFF_ERROR",payload:h})):(console.log("[todo loadStaff] STAFF_SUCCESS"),i({type:"STAFF_SUCCESS",payload:s||[]}))}catch(s){i({type:"STAFF_ERROR",payload:s.message})}},D=(s,h)=>{i({type:"SET_STAFF_FILTERS",payload:{[s]:h}})},U=s=>{w(s)},S=s=>{B(s),j(!0)},V=async s=>{if(window.confirm(n("staff.confirmDelete")))try{const{error:h}=await Me(s);i(h?{type:"STAFF_ERROR",payload:h}:{type:"REMOVE_STAFF",payload:s})}catch(h){i({type:"STAFF_ERROR",payload:h.message})}},k=async(s,h)=>{try{const{data:_,error:G}=await he(s,{status:h});i(G?{type:"STAFF_ERROR",payload:G}:{type:"UPDATE_STAFF",payload:_})}catch(_){i({type:"STAFF_ERROR",payload:_.message})}},R=()=>{j(!1),B(null)},H=()=>{w(null)},l=s=>{i(E?{type:"UPDATE_STAFF",payload:s}:{type:"ADD_STAFF",payload:s}),R()},f=s=>{const _={active:{color:"success",text:n("staff.status.active")},invited:{color:"warning",text:n("staff.status.invited")},inactive:{color:"secondary",text:n("staff.status.inactive")},terminated:{color:"danger",text:n("staff.status.terminated")}}[s]||{color:"secondary",text:s};return e.jsx(O,{color:_.color,children:_.text})},a=s=>{const _={owner:{color:"primary",text:n("staff.roles.owner")},manager:{color:"info",text:n("staff.roles.manager")},reception:{color:"success",text:n("staff.roles.reception")},senior_employee:{color:"warning",text:n("staff.roles.seniorEmployee")},junior_employee:{color:"secondary",text:n("staff.roles.juniorEmployee")}}[s]||{color:"secondary",text:s};return e.jsx(O,{color:_.color,children:_.text})},o=r.filter(s=>s.first_name.toLowerCase().includes(c.toLowerCase())||s.last_name.toLowerCase().includes(c.toLowerCase())||s.email.toLowerCase().includes(c.toLowerCase()));return A?e.jsx(pe,{staffId:A.id,onBack:H,onEdit:s=>{w(null),S(s)}}):q?e.jsx(ue,{staff:E,onClose:R,onSuccess:l}):e.jsx(C,{children:e.jsx(d,{xs:12,children:e.jsxs(I,{className:"mb-4",children:[e.jsx(oe,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h4",{className:"mb-0",children:n("staff.title")}),e.jsxs(z,{color:"primary",onClick:()=>j(!0),children:[e.jsx(v,{icon:Ae,className:"me-2"}),n("staff.addStaff")]})]})}),e.jsxs(P,{children:[x&&e.jsx(M,{color:"danger",dismissible:!0,children:x}),e.jsxs(C,{className:"mb-3",children:[e.jsx(d,{md:4,children:e.jsx(K,{children:e.jsx(T,{placeholder:n("staff.searchPlaceholder"),value:c,onChange:s=>g(s.target.value)})})}),e.jsx(d,{md:3,children:e.jsxs(ie,{value:N.status,onChange:s=>D("status",s.target.value),children:[e.jsx("option",{value:"all",children:n("staff.filters.allStatus")}),e.jsx("option",{value:"active",children:n("staff.status.active")}),e.jsx("option",{value:"invited",children:n("staff.status.invited")}),e.jsx("option",{value:"inactive",children:n("staff.status.inactive")}),e.jsx("option",{value:"terminated",children:n("staff.status.terminated")})]})}),e.jsx(d,{md:3,children:e.jsxs(ie,{value:N.role,onChange:s=>D("role",s.target.value),children:[e.jsx("option",{value:"all",children:n("staff.filters.allRoles")}),e.jsx("option",{value:"manager",children:n("staff.roles.manager")}),e.jsx("option",{value:"reception",children:n("staff.roles.reception")}),e.jsx("option",{value:"senior_employee",children:n("staff.roles.seniorEmployee")}),e.jsx("option",{value:"junior_employee",children:n("staff.roles.juniorEmployee")})]})})]}),t?e.jsx("div",{className:"text-center p-4",children:e.jsx(ee,{})}):e.jsxs(Q,{hover:!0,responsive:!0,children:[e.jsx(X,{children:e.jsxs(F,{children:[e.jsx(p,{children:n("staff.table.name")}),e.jsx(p,{children:n("staff.table.email")}),e.jsx(p,{children:n("staff.table.role")}),e.jsx(p,{children:n("staff.table.status")}),e.jsx(p,{children:n("staff.table.commission")}),e.jsx(p,{children:n("staff.table.actions")})]})}),e.jsx(Y,{children:o.length===0?e.jsx(F,{children:e.jsx(u,{colSpan:"6",className:"text-center",children:n("staff.noStaffFound")})}):o.map(s=>e.jsxs(F,{children:[e.jsx(u,{children:e.jsxs("strong",{children:[s.first_name," ",s.last_name]})}),e.jsx(u,{children:s.email}),e.jsx(u,{children:a(s.role)}),e.jsx(u,{children:f(s.status)}),e.jsxs(u,{children:[s.commission_rate,"%"]}),e.jsx(u,{children:e.jsxs(De,{children:[e.jsx(Le,{size:"sm",color:"ghost",children:e.jsx(v,{icon:Be})}),e.jsxs(Ie,{children:[e.jsxs($,{onClick:()=>U(s),children:[e.jsx(v,{icon:He,className:"me-2"}),n("staff.actions.viewDetails")]}),e.jsxs($,{onClick:()=>S(s),children:[e.jsx(v,{icon:me,className:"me-2"}),n("staff.actions.edit")]}),s.status==="invited"&&e.jsxs($,{children:[e.jsx(v,{icon:Pe,className:"me-2"}),n("staff.actions.resendInvitation")]}),s.status==="active"&&e.jsx($,{onClick:()=>k(s.id,"inactive"),children:n("staff.actions.deactivate")}),s.status==="inactive"&&e.jsx($,{onClick:()=>k(s.id,"active"),children:n("staff.actions.activate")}),e.jsxs($,{className:"text-danger",onClick:()=>V(s.id),children:[e.jsx(v,{icon:Oe,className:"me-2"}),n("staff.actions.delete")]})]})]})})]},s.id))})]})]})]})})})};export{ss as default};
