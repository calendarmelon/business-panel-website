import{u as E,j as e,C as B,i as q}from"./index-DMjyWb87.js";import{a as i,j as A}from"./vendor-39lPmIfa.js";import{c as n,b as d}from"./index.esm-Li650mXS.js";import{a as F,d as I,e as R,b as V,c as k,f as L}from"./useLocale-D5KkehiU.js";import{d as D,b as G,c as U,a as j}from"./CRow-D_VJqXdr.js";import{C as m}from"./CInputGroup-DyS8gjpD.js";import{C as u}from"./CInputGroupText-CLTmAy_-.js";import{c as v}from"./cil-lock-locked-DmxpJbVL.js";import"./redux-B4nc4lEw.js";var z=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M440,464V16H72V464H16v32H496V464Zm-32,0H272V400H240v64H104V48H408Z' class='ci-primary'/><rect width='32' height='32' x='160' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='240' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='320' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='160' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='240' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='320' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='160' y='112' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='240' y='112' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='320' y='112' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/>"];const _=()=>{const[h,w]=i.useState(null),[p,b]=i.useState(null),[t,N]=i.useState(null),[g,P]=i.useState(null),[a,l]=i.useState(!1),[y,o]=i.useState(""),c=A(),{user:f}=E(),{t:r}=F();i.useEffect(()=>{f&&c("/dashboard")},[f,c]);const S=async s=>{if(console.log("[DEBUG] Register handleSubmit()"),s.preventDefault(),l(!0),o(""),!h||!p||!t||!g){o(r("registerPage.errors.allFieldsRequired")),l(!1);return}if(t!==g){o(r("registerPage.errors.passwordsDoNotMatch")),l(!1);return}if(t.length<6){o(r("registerPage.errors.passwordTooShort")),l(!1);return}try{const{user:x,session:H,business:M,error:C}=await q(h,p,t);if(C)throw new Error(C);x&&H&&c("/dashboard")}catch(x){o(x.message||r("registerPage.errors.registrationFailed"))}finally{l(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(D,{children:e.jsx(G,{className:"justify-content-center",children:e.jsx(U,{md:9,lg:7,xl:6,children:e.jsx(I,{className:"mx-4",children:e.jsx(R,{className:"p-4",children:e.jsxs(V,{onSubmit:S,children:[e.jsx("h1",{children:r("registerPage.heading")}),e.jsx("p",{className:"text-body-secondary",children:r("registerPage.description")}),y&&e.jsx(k,{color:"danger",className:"mb-3",children:y}),e.jsxs(m,{className:"mb-3",children:[e.jsx(u,{children:e.jsx(n,{icon:z})}),e.jsx(d,{type:"text",placeholder:r("registerPage.placeholders.businessName"),autoComplete:"organization",value:h,onChange:s=>w(s.target.value),required:!0,disabled:a})]}),e.jsxs(m,{className:"mb-3",children:[e.jsx(u,{children:e.jsx(n,{icon:L})}),e.jsx(d,{type:"email",placeholder:r("registerPage.placeholders.email"),autoComplete:"email",value:p,onChange:s=>b(s.target.value),required:!0,disabled:a})]}),e.jsxs(m,{className:"mb-3",children:[e.jsx(u,{children:e.jsx(n,{icon:v})}),e.jsx(d,{type:"password",placeholder:r("registerPage.placeholders.password"),autoComplete:"new-password",value:t,onChange:s=>N(s.target.value),required:!0,disabled:a})]}),e.jsxs(m,{className:"mb-4",children:[e.jsx(u,{children:e.jsx(n,{icon:v})}),e.jsx(d,{type:"password",placeholder:r("registerPage.placeholders.confirmPassword"),autoComplete:"new-password",value:g,onChange:s=>P(s.target.value),required:!0,disabled:a})]}),e.jsx("div",{className:"d-grid",children:e.jsx(j,{type:"submit",color:"success",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(B,{size:"sm",className:"me-2"}),r("registerPage.creatingAccount")]}):r("registerPage.createAccount")})}),e.jsxs("div",{className:"text-center mt-3",children:[e.jsx("span",{className:"text-body-secondary",children:r("registerPage.alreadyHaveAccount")}),e.jsx(j,{color:"link",className:"p-0",onClick:()=>c("/login"),disabled:a,children:r("registerPage.signInHere")})]})]})})})})})})})};export{_ as default};
