import{_ as F,c as k,P as C,u as G,j as e,C as _,l as q}from"./index-DMjyWb87.js";import{a as o,R as T,j as U}from"./vendor-39lPmIfa.js";import{c as b,b as N}from"./index.esm-Li650mXS.js";import{a as A,d as y,e as v,b as B,c as D,f as M}from"./useLocale-D5KkehiU.js";import{d as z,b as w,c as u,a as p}from"./CRow-D_VJqXdr.js";import{C as P}from"./CInputGroup-DyS8gjpD.js";import{C as E}from"./CInputGroupText-CLTmAy_-.js";import{c as H}from"./cil-lock-locked-DmxpJbVL.js";import"./redux-B4nc4lEw.js";const x=o.forwardRef((a,t)=>{var{children:n,className:i}=a,r=F(a,["children","className"]);return T.createElement("div",Object.assign({className:k("card-group",i)},r,{ref:t}),n)});x.propTypes={children:C.node,className:C.string};x.displayName="CCardGroup";function O(a=0,t=2){return Math.floor(Math.random()*(t-a+1)+a)}const S=[],I=S[O(0,S.length-1)],ee=()=>{const[a,t]=o.useState(I),[n,i]=o.useState(I),[r,c]=o.useState(!1),[j,d]=o.useState(""),m=U(),{user:g}=G(),{t:s}=A();o.useEffect(()=>{console.log("[todo Login] useEffect-> user",g),g&&(console.log("[todo Login] useEffect->navigate(/dashboard) --->>"),m("/dashboard"))},[g,m]);const L=async l=>{if(console.log("[todo handleSubmit]"),l.preventDefault(),c(!0),d(""),!a||!n){d(s("loginPage.errors.allFieldsRequired")),c(!1);return}try{const{user:h,session:R,error:f}=await q(a,n);if(f)throw new Error(f);console.log("[todo handleSubmit] authUser ",h),console.log("[todo handleSubmit] session ",R)}catch(h){d(h.message||"Login failed")}finally{c(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(z,{children:e.jsx(w,{className:"justify-content-center",children:e.jsx(u,{md:8,children:e.jsxs(x,{children:[e.jsx(y,{className:"p-4",children:e.jsx(v,{children:e.jsxs(B,{onSubmit:L,children:[e.jsx("h1",{children:s("common.actions.login")}),e.jsx("p",{className:"text-body-secondary",children:s("loginPage.description")}),j&&e.jsx(D,{color:"danger",className:"mb-3",children:j}),e.jsxs(P,{className:"mb-3",children:[e.jsx(E,{children:e.jsx(b,{icon:M})}),e.jsx(N,{type:"email",placeholder:s("loginPage.placeholders.email"),autoComplete:"email",value:a,onChange:l=>t(l.target.value),required:!0,disabled:r})]}),e.jsxs(P,{className:"mb-4",children:[e.jsx(E,{children:e.jsx(b,{icon:H})}),e.jsx(N,{type:"password",placeholder:s("loginPage.placeholders.password"),autoComplete:"current-password",value:n,onChange:l=>i(l.target.value),required:!0,disabled:r})]}),e.jsxs(w,{children:[e.jsx(u,{xs:6,children:e.jsx(p,{type:"submit",color:"primary",className:"px-4",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(_,{size:"sm",className:"me-2"}),s("loginPage.signingIn")]}):s("common.actions.login")})}),e.jsx(u,{xs:6,className:"text-right",children:e.jsx(p,{color:"link",className:"px-0",children:s("loginPage.forgotPassword")})})]})]})})}),e.jsx(y,{className:"text-white bg-primary py-4",style:{width:"100%"},children:e.jsx(v,{className:"text-center",children:e.jsxs("div",{children:[e.jsx("h2",{children:s("loginPage.brandHeading")}),e.jsx("p",{children:s("loginPage.brandDescription")}),e.jsx(p,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,onClick:()=>m("/register"),disabled:r,children:s("loginPage.registerNow")})]})})})]})})})})})};export{ee as default};
